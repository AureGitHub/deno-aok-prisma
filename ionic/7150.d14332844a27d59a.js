"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7150],{7150:(U,v,a)=>{a.r(v),a.d(v,{ServiciosPageModule:()=>C});var g=a(4755),p=a(9401),r=a(7002),m=a(9915),u=a(5861),_=a(1699),d=a(8175),e=a(2504),f=a(7241),y=a(6014),h=a(3380);function S(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"div")(1,"app-editor-entity",9),e.NdJ("saveEvent",function(n){e.CHM(o);const s=e.oxw();return e.KtG(s.save(n))})("deleteEvent",function(n){e.CHM(o);const s=e.oxw();return e.KtG(s.borrar(n))}),e.qZA()()}if(2&i){const o=e.oxw();e.xp6(1),e.Q6J("entity",o.entitySelected)("setEntity",o.entityDescripcion)("isSaving",o.isSaving)("isDeleting",o.isDeleting)}}function Z(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-row",10),e.NdJ("click",function(){const s=e.CHM(o).$implicit,c=e.oxw();return e.KtG(c.selectItem(s))}),e.TgZ(1,"ion-col"),e._uU(2),e.qZA(),e.TgZ(3,"ion-col"),e._uU(4),e.qZA(),e.TgZ(5,"ion-col"),e._uU(6),e.qZA(),e.TgZ(7,"ion-col"),e._uU(8),e.qZA(),e.TgZ(9,"ion-col"),e._uU(10),e.qZA()()}if(2&i){const o=l.$implicit,t=e.oxw();e.Q6J("ngClass",t.entitySelected&&o.id===t.entitySelected.id?"tableRowSeleded":"tableRow"),e.xp6(2),e.lnq(" ",o.fecha," ",o.horainicio,"-",o.horafin," "),e.xp6(2),e.Oqu(o.nombreempleada),e.xp6(2),e.Oqu(o.supllevantar),e.xp6(2),e.Oqu(o.pagado),e.xp6(2),e.AsE("",o.horas,"/",o.euros,"")}}function T(i,l){if(1&i){const o=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col"),e._uU(2),e.qZA(),e.TgZ(3,"ion-col"),e._uU(4),e.qZA(),e.TgZ(5,"ion-col"),e._uU(6),e.qZA(),e.TgZ(7,"ion-chip",11),e.NdJ("click",function(){const s=e.CHM(o).$implicit,c=e.oxw();return e.KtG(c.selectItemResumen(s))}),e._uU(8,"A pagado"),e.qZA()()}if(2&i){const o=l.$implicit;e.xp6(2),e.Oqu(o.nombreempleada),e.xp6(2),e.Oqu(o.horas),e.xp6(2),e.Oqu(o.euros)}}const P=[{path:"",component:(()=>{class i{constructor(o,t,n){this.myHttpService=o,this.utilService=t,this.alertController=n,this.isLoading=!1,this.entityName="servicio",this.busquedaPagado="n"}ngOnInit(){var o=this;return(0,u.Z)(function*(){o.loadList(o.busquedaPagado)})()}handleChangeBusquedaPagado(o){this.loadList(this.busquedaPagado)}loadList(o=null){var t=this;return(0,u.Z)(function*(){let n="";o&&(n+=`pagado=${t.busquedaPagado}`);let s=new d.a("get","gestion-casa","servicios","getPresent",null,null,n);t.isLoading=!0,t.lstServicios=[],t.lstServicios=yield t.myHttpService.ejecuteURL(s),s=new d.a("get","gestion-casa","servicios","getResumenNoPagado"),t.lstResumenServicios=[],t.lstResumenServicios=yield t.myHttpService.ejecuteURL(s),t.isLoading=!1})()}addToolEntity(){const o=this.utilService.toISOString(new Date);let t=new Date;t.setHours(10),t.setMinutes(0);let n=new Date;n.setHours(13),n.setMinutes(0);const s=this.utilService.toISOString(t),c=this.utilService.toISOString(n);this.entitySelected={fecha:o,horaInicio:s,horaFin:c},this.entityDescripcion=_.Z.giveMeEntity(this.entityName)}cancelToolEntity(){this.entityDescripcion=null}selectItem(o){var t=this;return(0,u.Z)(function*(){const n=new d.a("get","gestion-casa","servicios",null,null,o.id);t.entitySelected=yield t.myHttpService.ejecuteURL(n),t.entityDescripcion=_.Z.giveMeEntity(t.entityName)})()}selectItemResumen(o){var t=this;return(0,u.Z)(function*(){var s;yield(yield t.alertController.create({header:`Antenci\xf3n!! Todos los servicios de ${o.nombreempleada} van a pasar a PAGADOS. \xbfContinuar?`,buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"OK",role:"confirm",handler:(s=(0,u.Z)(function*(){let c=new d.a("put","gestion-casa","servicios","upServPagado",{pagado:!0},o.empleadaid,null);yield t.myHttpService.ejecuteURL(c),t.loadList(t.busquedaPagado)}),function(){return s.apply(this,arguments)})}]})).present()})()}save(o){var t=this;return(0,u.Z)(function*(){t.isSaving=!0;const n=o.id?"put":"post",s=o.id?o.id.toString():null,c=new d.a(n,"gestion-casa","servicios",null,o,s);yield t.myHttpService.ejecuteURL(c),t.entityDescripcion=null,t.isSaving=!1,t.loadList(t.busquedaPagado)})()}borrar(o){var t=this;return(0,u.Z)(function*(){t.isDeleting=!0;const s=o.id.toString(),c=new d.a("delete","gestion-casa","servicios",null,null,s);yield t.myHttpService.ejecuteURL(c),t.entityDescripcion=null,t.isDeleting=!1,t.loadList(t.busquedaPagado)})()}cancel(){}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(d.y),e.Y36(f.f),e.Y36(r.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-servicios"]],decls:42,vars:6,consts:[[3,"isLoading","entityDescripcion","addToolEntity","cancelToolEntity"],[4,"ngIf"],["aria-label","Fruit","interface","popover",3,"ngModel","ngModelChange","ionChange"],["value","n"],["value","s"],["value","t"],[1,"tableTitle"],[3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"entity","setEntity","isSaving","isDeleting","saveEvent","deleteEvent"],[3,"ngClass","click"],["color","danger",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"app-tool-entity",0),e.NdJ("addToolEntity",function(){return t.addToolEntity()})("cancelToolEntity",function(){return t.cancelToolEntity()}),e.qZA(),e.YNc(1,S,2,4,"div",1),e.TgZ(2,"ion-card")(3,"ion-card-title"),e._uU(4,"Servicios "),e.TgZ(5,"ion-select",2),e.NdJ("ngModelChange",function(s){return t.busquedaPagado=s})("ionChange",function(s){return t.handleChangeBusquedaPagado(s)}),e.TgZ(6,"ion-select-option",3),e._uU(7,"No pagados"),e.qZA(),e.TgZ(8,"ion-select-option",4),e._uU(9,"Pagados"),e.qZA(),e.TgZ(10,"ion-select-option",5),e._uU(11,"Todos"),e.qZA()()(),e._UZ(12,"ion-card-subtitle"),e.TgZ(13,"ion-card-content")(14,"ion-grid")(15,"ion-row",6)(16,"ion-col"),e._uU(17,"fecha"),e.qZA(),e.TgZ(18,"ion-col"),e._uU(19,"Nombre"),e.qZA(),e.TgZ(20,"ion-col"),e._uU(21,"Lev"),e.qZA(),e.TgZ(22,"ion-col"),e._uU(23,"pagado"),e.qZA(),e.TgZ(24,"ion-col"),e._uU(25,"euros"),e.qZA()(),e.YNc(26,Z,11,9,"ion-row",7),e.qZA()()(),e.TgZ(27,"ion-card")(28,"ion-card-title"),e._uU(29,"Resumen Pagos"),e.qZA(),e.TgZ(30,"ion-card-content")(31,"ion-grid")(32,"ion-row",6)(33,"ion-col"),e._uU(34,"nombre"),e.qZA(),e.TgZ(35,"ion-col"),e._uU(36,"horas"),e.qZA(),e.TgZ(37,"ion-col"),e._uU(38,"Euros"),e.qZA(),e.TgZ(39,"ion-col"),e._uU(40,"Acci\xf3n"),e.qZA()(),e.YNc(41,T,9,3,"ion-row",8),e.qZA()()()),2&o&&(e.Q6J("isLoading",t.isLoading)("entityDescripcion",t.entityDescripcion),e.xp6(1),e.Q6J("ngIf",t.entityDescripcion),e.xp6(4),e.Q6J("ngModel",t.busquedaPagado),e.xp6(21),e.Q6J("ngForOf",t.lstServicios),e.xp6(15),e.Q6J("ngForOf",t.lstResumenServicios))},dependencies:[g.mk,g.sg,g.O5,p.JJ,p.On,r.PM,r.FN,r.tO,r.Dq,r.hM,r.wI,r.jY,r.Nd,r.t9,r.n0,r.QI,y.G,h.d],styles:[".tableTitle[_ngcontent-%COMP%]{text-align:center;color:#fff;background-color:#444242;font-weight:700;font-size:14px}.tableRow[_ngcontent-%COMP%]{text-align:center;font-size:13px;border:1px solid;cursor:pointer}.tableRowSeleded[_ngcontent-%COMP%]{text-align:center;color:#fff;background-color:#00008b;cursor:pointer}.tableRow[_ngcontent-%COMP%]:hover{color:#fff;background-color:#00008b}"]}),i})()}];let q=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(P),m.Bz]}),i})();var A=a(3399);let C=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,p.u5,r.Pc,q,A.q]}),i})()}}]);