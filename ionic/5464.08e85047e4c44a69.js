"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5464],{6014:(M,y,s)=>{s.d(y,{G:()=>W});var _=s(5861),t=s(2504),u=s(9401),h=s(8175),E=s(6575),a=s(7002),x=s(7241),v=s(5591),f=s(4755);function m(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"ion-input",6),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.s9C("placeholder",n.title),t.s9C("formControlName",n.name)}}function d(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"ion-input",7),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.s9C("placeholder",n.title),t.s9C("formControlName",n.name)}}function l(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"ion-checkbox",8),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(1),t.s9C("formControlName",n.name)}}function p(e,r){if(1&e&&(t.TgZ(0,"ion-select-option",12),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.desc)}}function g(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"ion-select",10),t.NdJ("ionChange",function(i){t.CHM(n);const c=t.oxw(3).$implicit,C=t.oxw(2);return t.KtG(C.select_onChange(c.name,i))}),t.YNc(1,p,2,2,"ion-select-option",11),t.qZA()}if(2&e){const n=t.oxw(3).$implicit,o=t.oxw(2);t.MGl("name","'",n.name,"'"),t.s9C("formControlName",n.name),t.xp6(1),t.Q6J("ngForOf",o.objlstSelect[n.name])}}function N(e,r){if(1&e&&(t.ynx(0),t.YNc(1,g,2,3,"ion-select",9),t.BQk()),2&e){const n=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o.objlstSelect[n.name])}}function w(e,r){if(1&e&&t._UZ(0,"ion-datetime",15),2&e){const n=t.oxw(3).$implicit;t.s9C("formControlName",n.name),t.Q6J("firstDayOfWeek",1)}}function I(e,r){1&e&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"ion-item"),t._UZ(3,"ion-datetime-button",13),t.TgZ(4,"ion-modal",14),t.YNc(5,w,1,2,"ng-template"),t.qZA()(),t.BQk()),2&e&&(t.xp6(4),t.Q6J("keepContentsMounted",!0))}function D(e,r){if(1&e&&t._UZ(0,"ion-datetime",17),2&e){const n=t.oxw(3).$implicit;t.MGl("id","datetime_",n.name,""),t.s9C("formControlName",n.name),t.Q6J("firstDayOfWeek",1)("preferWheel",!1)}}function S(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"ion-item"),t._UZ(3,"ion-datetime-button",16),t.TgZ(4,"ion-modal",14),t.YNc(5,D,1,4,"ng-template"),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(3),t.MGl("datetime","datetime_",n.name,""),t.xp6(1),t.Q6J("keepContentsMounted",!0)}}function P(e,r){if(1&e&&t._UZ(0,"ion-datetime",18),2&e){const n=t.oxw(3).$implicit;t.MGl("id","datetime_",n.name,""),t.s9C("formControlName",n.name),t.Q6J("firstDayOfWeek",1)("preferWheel",!1)}}function Q(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"ion-item"),t._UZ(3,"ion-datetime-button",16),t.TgZ(4,"ion-modal",14),t.YNc(5,P,1,4,"ng-template"),t.qZA()(),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(3),t.MGl("datetime","datetime_",n.name,""),t.xp6(1),t.Q6J("keepContentsMounted",!0)}}function J(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"ion-label",3),t._uU(2),t.qZA(),t.ynx(3,4),t.YNc(4,m,2,2,"ng-container",5),t.YNc(5,d,2,2,"ng-container",5),t.YNc(6,l,2,1,"ng-container",5),t.YNc(7,N,2,1,"ng-container",5),t.YNc(8,I,6,1,"ng-container",5),t.YNc(9,S,6,2,"ng-container",5),t.YNc(10,Q,6,2,"ng-container",5),t.BQk()()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.title),t.xp6(1),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","text"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","datetime"),t.xp6(1),t.Q6J("ngSwitchCase","date"),t.xp6(1),t.Q6J("ngSwitchCase","time")}}function U(e,r){if(1&e&&(t.TgZ(0,"ion-item"),t.YNc(1,J,11,9,"ng-container",1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Q6J("ngIf",!n.hide)}}function A(e,r){1&e&&t._UZ(0,"ion-spinner")}function b(e,r){1&e&&(t.TgZ(0,"ion-label"),t._uU(1,"Guardar"),t.qZA())}function G(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"ion-button",24),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(3);return t.KtG(i.borrar())}),t._UZ(1,"ion-icon",25),t._uU(2," Borrar "),t.qZA()}if(2&e){const n=t.oxw(3);t.Q6J("disabled",n.isDeleting)}}function k(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item")(1,"ion-button",19),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.onSubmit())}),t._UZ(2,"ion-icon",20),t.YNc(3,A,1,0,"ion-spinner",1),t.YNc(4,b,2,0,"ion-label",1),t.qZA(),t.TgZ(5,"ion-button",21),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.cancelar())}),t._UZ(6,"ion-icon",22),t._uU(7," Cancelar "),t.qZA(),t.YNc(8,G,3,1,"ion-button",23),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("disabled",n.isSaving||!n.formGroup.valid),t.xp6(2),t.Q6J("ngIf",n.isSaving),t.xp6(1),t.Q6J("ngIf",!n.isSaving),t.xp6(4),t.Q6J("ngIf",!n.isAlta)}}function Y(e,r){if(1&e&&(t.TgZ(0,"ion-list"),t._UZ(1,"ion-item"),t.YNc(2,U,2,1,"ion-item",2),t.YNc(3,k,9,4,"ion-item",1),t.qZA()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.lstInput),t.xp6(1),t.Q6J("ngIf",n.havePermision)}}let W=(()=>{class e{set entityRefresh(n){if(n)for(let o in n)this.formGroup.controls[o].setValue(n[o])}set setEntity(n){this.lstInput=n;const o={};n.forEach(i=>{if(o[i.name]=new u.NI(""),i.validators){const c=[];i.validators.forEach(C=>{c.push(C)}),c.length>0&&o[i.name].setValidators(c)}}),this.formGroup=new u.cw(o),this.entity.id?(this.formGroup.addControl("id",new u.NI("")),this.formGroup.controls.id.setValue(this.entity.id),n.forEach(i=>{this.formGroup.controls[i.name].setValue(this.entity[i.name])})):(n.forEach(i=>{this.entity[i.name]&&this.formGroup.controls[i.name].setValue(this.entity[i.name])}),n.forEach(i=>{i.hasOwnProperty("default")&&this.formGroup.controls[i.name].setValue(i.default)})),this.CreateListForSelect(n)}constructor(n,o,i,c){this.alertController=n,this.utilService=o,this.myHttpService=i,this.seguridadService=c,this.WhoHasPermision=[E.u.ADMIN,E.u.GOD],this.havePermision=!1,this.lstInput=[],this.isSaving=!1,this.isDeleting=!1,this.objlstSelect={},this.saveEvent=new t.vpe,this.deleteEvent=new t.vpe,this.cancelEvent=new t.vpe,this.selectEvent=new t.vpe,this.isAlta=!1}ngOnInit(){const n=this.seguridadService.UserGet();this.havePermision=this.WhoHasPermision.some(o=>o==n.role)}CreateListForSelect(n){var o=this;n.forEach(function(){var i=(0,_.Z)(function*(c){if("select"==c.type){const L=new h.a("get","gestion-casa",c.coleccion);let B=yield o.myHttpService.ejecuteURL(L),Z=[{id:null,desc:"seleccione.."}];B.forEach(T=>{let O=!0;null!=c&&c.excluir&&c.excluir.some(K=>K==T[c.desc])&&(O=!1),O&&Z.push({id:parseInt(T[c.id]),desc:T[c.desc]})}),o.objlstSelect[c.name]=Z}});return function(c){return i.apply(this,arguments)}}())}onSubmit(){this.lstInput.forEach(n=>{if(("date"==n.type||"datetime"==n.type||"time"==n.type)&&this.formGroup.controls[n.name].dirty){new Date(this.formGroup.controls[n.name].value);let i=this.utilService.toISOString(new Date(this.formGroup.controls[n.name].value));this.formGroup.controls[n.name].setValue(i)}}),this.saveEvent.emit(this.formGroup.value)}borrar(){var n=this;return(0,_.Z)(function*(){yield(yield n.alertController.create({header:"Antenci\xf3n!! se va a borrar el elemento. \xbfContinuar?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"OK",role:"confirm",handler:()=>{n.deleteEvent.emit(n.formGroup.value)}}]})).present()})()}cancelar(){this.cancelEvent.emit(!0)}transformDate(n){let o=n.getFullYear(),i=n.getMonth()+1,c=n.getDate();return`${o}-${i<10?"0"+i:i}-${c<10?"0"+c:c}`}select_onChange(n,o){this.selectEvent.emit({field:n,event:o})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.Br),t.Y36(x.f),t.Y36(h.y),t.Y36(v.F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-editor-entity"]],inputs:{entity:"entity",isAlta:"isAlta",entityRefresh:"entityRefresh",setEntity:"setEntity"},outputs:{saveEvent:"saveEvent",deleteEvent:"deleteEvent",cancelEvent:"cancelEvent",selectEvent:"selectEvent"},decls:2,vars:2,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],[4,"ngFor","ngForOf"],["position","stacked"],[3,"ngSwitch"],[4,"ngSwitchCase"],["type","text",3,"placeholder","formControlName"],["type","number",3,"placeholder","formControlName"],[3,"formControlName"],["interface","popover","placeholder","Seleccione",3,"name","formControlName","ionChange",4,"ngIf"],["interface","popover","placeholder","Seleccione",3,"name","formControlName","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["datetime","datetime"],[3,"keepContentsMounted"],["locale","es-ES","id","datetime",3,"firstDayOfWeek","formControlName"],[3,"datetime"],["presentation","date","locale","es-ES",3,"firstDayOfWeek","id","preferWheel","formControlName"],["presentation","time","locale","es-ES",3,"firstDayOfWeek","id","preferWheel","formControlName"],["color","success",3,"disabled","click"],["slot","start","name","save"],["color","warning",3,"click"],["name","arrow-back-outline"],["color","danger",3,"disabled","click",4,"ngIf"],["color","danger",3,"disabled","click"],["slot","start","name","close-circle"]],template:function(n,o){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.YNc(1,Y,4,2,"ion-list",1),t.qZA()),2&n&&(t.Q6J("formGroup",o.formGroup),t.xp6(1),t.Q6J("ngIf",o.lstInput))},dependencies:[f.sg,f.O5,f.RF,f.n9,a.YG,a.nz,a.x4,a.Mj,a.gu,a.pK,a.Ie,a.Q$,a.q_,a.t9,a.n0,a.PQ,a.ki,a.w,a.as,a.QI,a.j9,u._Y,u.JJ,u.JL,u.sg,u.u]}),e})()},3380:(M,y,s)=>{s.d(y,{d:()=>f});var _=s(2504),t=s(6575),u=s(5591),h=s(4755),E=s(7002);function a(m,d){if(1&m){const l=_.EpF();_.TgZ(0,"ion-icon",3),_.NdJ("click",function(){_.CHM(l);const g=_.oxw();return _.KtG(g.add())}),_.qZA()}}function x(m,d){if(1&m){const l=_.EpF();_.TgZ(0,"ion-icon",4),_.NdJ("click",function(){_.CHM(l);const g=_.oxw();return _.KtG(g.cancel())}),_.qZA()}}function v(m,d){1&m&&_._UZ(0,"ion-spinner",5)}let f=(()=>{class m{constructor(l){this.seguridadService=l,this.addToolEntity=new _.vpe,this.cancelToolEntity=new _.vpe,this.WhoHasPermision=[t.u.ADMIN,t.u.GOD],this.havePermision=!1}ngOnInit(){const l=this.seguridadService.UserGet();this.havePermision=this.WhoHasPermision.some(p=>p==l.role)}add(){this.addToolEntity.emit(!0)}cancel(){this.cancelToolEntity.emit(!0)}}return m.\u0275fac=function(l){return new(l||m)(_.Y36(u.F))},m.\u0275cmp=_.Xpm({type:m,selectors:[["app-tool-entity"]],inputs:{isLoading:"isLoading",entityDescripcion:"entityDescripcion"},outputs:{addToolEntity:"addToolEntity",cancelToolEntity:"cancelToolEntity"},decls:3,vars:3,consts:[["class","hand","style","font-size: 30px;","color","primary","slot","icon-only","name","add-circle",3,"click",4,"ngIf"],["class","hand","style","font-size: 30px;","color","warning","slot","icon-only","name","arrow-back-outline",3,"click",4,"ngIf"],["name","dots",4,"ngIf"],["color","primary","slot","icon-only","name","add-circle",1,"hand",2,"font-size","30px",3,"click"],["color","warning","slot","icon-only","name","arrow-back-outline",1,"hand",2,"font-size","30px",3,"click"],["name","dots"]],template:function(l,p){1&l&&(_.YNc(0,a,1,0,"ion-icon",0),_.YNc(1,x,1,0,"ion-icon",1),_.YNc(2,v,1,0,"ion-spinner",2)),2&l&&(_.Q6J("ngIf",p.havePermision&&!p.isLoading&&!p.entityDescripcion),_.xp6(1),_.Q6J("ngIf",!p.isLoading&&p.entityDescripcion),_.xp6(1),_.Q6J("ngIf",p.isLoading))},dependencies:[h.O5,E.gu,E.PQ],styles:[".conectado[_ngcontent-%COMP%]{color:green}"]}),m})()}}]);