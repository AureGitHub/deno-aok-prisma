"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4699],{4699:(y,m,d)=>{d.r(m),d.d(m,{UsersPagePageModule:()=>C});var p=d(6814),s=d(95),r=d(2511),v=d(5861),i=d(242),e=d(6689);function g(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"ion-card",1)(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"ion-card-content")(8,"form",2)(9,"ion-list")(10,"ion-item")(11,"ion-checkbox",3),e._uU(12,"Bizum"),e.qZA()(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",4),e.qZA(),e.TgZ(15,"ion-item"),e._UZ(16,"br"),e.TgZ(17,"base-button-guardar",5),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSubmit())}),e.qZA()()()()(),e._UZ(18,"br")(19,"br"),e.TgZ(20,"base-button-cancelar",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancel())}),e.qZA()()}if(2&a){const t=e.oxw();e.s9C("color",(null==t.rowAddSaldo?null:t.rowAddSaldo.saldo)<1?"danger":(null==t.rowAddSaldo?null:t.rowAddSaldo.saldo)>1&&(null==t.rowAddSaldo?null:t.rowAddSaldo.saldo)<2?"warning":"primary"),e.xp6(3),e.Oqu(null==t.rowAddSaldo?null:t.rowAddSaldo.name),e.xp6(2),e.hij("Saldo actual : ",e.lcZ(6,6,null==t.rowAddSaldo?null:t.rowAddSaldo.saldo),""),e.xp6(3),e.Q6J("formGroup",t.formGroup),e.xp6(9),e.Q6J("isSaving",t.isSaving)("valid",t.formGroup.valid)}}let S=(()=>{var a;class l{set SetrowAddSaldo(o){o&&(this.rowAddSaldo=o,this.createForm())}constructor(o,n){this.myHttpService=o,this.utilService=n,this.saveEvent=new e.vpe,this.cancelEvent=new e.vpe,this.isSaving=!1}ngOnInit(){}createForm(){var o;this.formGroup=new s.cw({id:new s.NI("",[s.kI.required]),importe:new s.NI("",[s.kI.required]),bizum:new s.NI("")}),this.formGroup.controls.bizum.setValue(!0),this.formGroup.controls.id.setValue(null===(o=this.rowAddSaldo)||void 0===o?void 0:o.id)}onSubmit(){var o=this;return(0,v.Z)(function*(){o.isSaving=!0;try{const n=new i.classHttp("post","user","addSaldo",o.formGroup.value);yield o.myHttpService.ejecuteURL(n),o.isSaving=!1,o.utilService.message(i.typeMessage.success,"Guardado correctamente"),o.rowAddSaldo=null,o.saveEvent.emit(!0)}catch{o.isSaving=!1}})()}cancel(){this.rowAddSaldo=null,this.cancelEvent.emit(!0)}}return(a=l).\u0275fac=function(o){return new(o||a)(e.Y36(i.MyHttpService),e.Y36(i.UtilService))},a.\u0275cmp=e.Xpm({type:a,selectors:[["add-saldo"]],inputs:{SetrowAddSaldo:"SetrowAddSaldo"},outputs:{saveEvent:"saveEvent",cancelEvent:"cancelEvent"},decls:2,vars:1,consts:[[3,"isOpen"],[3,"color"],[3,"formGroup"],["formControlName","bizum"],["label","Ingreso","formControlName","importe","type","number","placeholder","000"],[3,"isSaving","valid","click"],[3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-modal",0),e.YNc(1,g,21,8,"ng-template"),e.qZA()),2&o&&e.Q6J("isOpen",null!=n.rowAddSaldo)},dependencies:[s._Y,s.JJ,s.JL,s.sg,s.u,r.PM,r.FN,r.Zi,r.tO,r.Dq,r.nz,r.pK,r.Ie,r.q_,r.ki,r.w,r.as,i.ButtonGuardarComponent,i.ButtonCancelarComponent,p.JJ]}),l})();const f=function(){return{class:"enRojo",condicion:"row['saldo'] <1"}},h=function(){return{class:"enNaranja",condicion:"row['saldo'] > 1 && row['saldo'] < 2"}},A=function(a,l){return[a,l]};let w=(()=>{var a;class l extends i.BasePage{constructor(o){super(o),this.myHttpService=o,this.columns=[{name:"Nombre",prop:"name",type:"text",visible:!0},{name:"Saldo",prop:"saldo",type:"number",visible:!0,OrderInit:"ASC"},{name:"estado",prop:"estadoId",type:"number",filterInit:' "estadoId" <> 2',visible:!1},{name:"Accion",prop:"",type:"action",visible:!0,icon:"card"}],this.soloActivos=!0,this.entityName="user"}ngOnInit(){return(0,v.Z)(function*(){})()}soloActivoEvent(o){let n=this.columns.find(c=>"estado"==c.name);n&&(n.filterInit=this.soloActivos?"":' "estadoId" <> 2',this.getTableRefresh())}actionEmiter(o){"Accion"===(null==o?void 0:o.action)&&this.AddSaldo(o.row)}AddSaldo(o){this.rowAddSaldo=o}}return(a=l).\u0275fac=function(o){return new(o||a)(e.Y36(i.MyHttpService))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-users"]],features:[e.qOj],decls:9,vars:13,consts:[["justify","start",3,"ngModel","ngModelChange","click"],[3,"title","entityName","columns","withCache","refresh","objNgClass","actionEmiter"],[3,"SetrowAddSaldo","saveEvent","cancelEvent"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-checkbox",0),e.NdJ("ngModelChange",function(u){return n.soloActivos=u})("click",function(u){return n.soloActivoEvent(u)}),e._uU(4,"Solo activos"),e.qZA()()(),e.TgZ(5,"ion-row")(6,"ion-col")(7,"my-table",1),e.NdJ("actionEmiter",function(u){return n.actionEmiter(u)}),e.qZA()()()(),e.TgZ(8,"add-saldo",2),e.NdJ("saveEvent",function(){return n.getTableRefresh()})("cancelEvent",function(){return n.rowAddSaldo=null}),e.qZA()),2&o&&(e.xp6(3),e.Q6J("ngModel",n.soloActivos),e.xp6(4),e.Q6J("title","Lud\xf3patas")("entityName",n.entityName)("columns",n.columns)("withCache",!0)("refresh",n.tableRefresh)("objNgClass",e.WLB(10,A,e.DdM(8,f),e.DdM(9,h))),e.xp6(1),e.Q6J("SetrowAddSaldo",n.rowAddSaldo))},dependencies:[s.JJ,s.On,r.nz,r.wI,r.jY,r.Nd,r.w,i.MyTableComponent,S],styles:["ion-checkbox[_ngcontent-%COMP%]{--size: 32px;--checkbox-background-checked: #6815ec}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #6815ec}"]}),l})();var _=d(3044);const b=[{path:"",component:w}];let C=(()=>{var a;class l{}return(a=l).\u0275fac=function(o){return new(o||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[p.ez,s.u5,s.UX,r.Pc,_.Bz.forChild(b),i.SharedComponentsModule]}),l})()}}]);