"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[939],{939:(Z,m,i)=>{i.r(m),i.d(m,{UsersPagePageModule:()=>T});var p=i(6814),r=i(95),a=i(2511),v=i(5861),d=i(242),e=i(6689),g=i(5875);function f(s,l){if(1&s){const o=e.EpF();e.TgZ(0,"ion-card",1)(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"ion-card-content")(8,"form",2)(9,"ion-list")(10,"ion-item")(11,"h2"),e._uU(12,"Incrementar saldo"),e.qZA()(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",3),e.qZA(),e.TgZ(15,"ion-item"),e._UZ(16,"br"),e.TgZ(17,"base-button-guardar",4),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onSubmit())}),e.qZA()()()()(),e._UZ(18,"br")(19,"br"),e.TgZ(20,"base-button-cancelar",5),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.cancel())}),e.qZA()()}if(2&s){const o=e.oxw();e.s9C("color",(null==o.user?null:o.user.saldo)<1?"danger":(null==o.user?null:o.user.saldo)>1&&(null==o.user?null:o.user.saldo)<2?"warning":"primary"),e.xp6(3),e.Oqu(null==o.user?null:o.user.name),e.xp6(2),e.hij("Saldo actual : ",e.lcZ(6,6,null==o.user?null:o.user.saldo),""),e.xp6(3),e.Q6J("formGroup",o.formGroup),e.xp6(9),e.Q6J("isSaving",o.isSaving)("valid",o.formGroup.valid)}}let h=(()=>{var s;class l{set SetUser(n){n&&(this.user=n,this.createForm())}constructor(n,t){this.myHttpService=n,this.utilService=t,this.saveEvent=new e.vpe,this.cancelEvent=new e.vpe,this.isSaving=!1}ngOnInit(){}createForm(){var n;this.formGroup=new r.cw({id:new r.NI("",[r.kI.required]),importe:new r.NI("",[r.kI.required])}),this.formGroup.controls.id.setValue(null===(n=this.user)||void 0===n?void 0:n.id)}onSubmit(){var n=this;return(0,v.Z)(function*(){n.isSaving=!0;try{const t=new d.classHttp("post","user",null,"addSaldo",n.formGroup.value),c=yield n.myHttpService.ejecuteURL(t);n.isSaving=!1,c&&(n.utilService.message(d.typeMessage.success,"Guardado correctamente"),n.user=null,n.saveEvent.emit(!0))}catch{n.isSaving=!1}})()}cancel(){this.user=null,this.cancelEvent.emit(!0)}}return(s=l).\u0275fac=function(n){return new(n||s)(e.Y36(d.MyHttpService),e.Y36(d.UtilService))},s.\u0275cmp=e.Xpm({type:s,selectors:[["add-saldo"]],inputs:{SetUser:"SetUser"},outputs:{saveEvent:"saveEvent",cancelEvent:"cancelEvent"},decls:2,vars:1,consts:[[3,"isOpen","willDismiss"],[3,"color"],[3,"formGroup"],["label","importe","formControlName","importe","type","number","placeholder","000"],[3,"isSaving","valid","click"],[3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-modal",0),e.NdJ("willDismiss",function(){return t.cancel()}),e.YNc(1,f,21,8,"ng-template"),e.qZA()),2&n&&e.Q6J("isOpen",null!=t.user)},dependencies:[a.PM,a.FN,a.Zi,a.tO,a.Dq,a.pK,a.Ie,a.q_,a.ki,a.as,r._Y,r.JJ,r.JL,r.sg,r.u,d.ButtonGuardarComponent,d.ButtonCancelarComponent,p.JJ],styles:["ion-checkbox[_ngcontent-%COMP%]{--size: 32px;--checkbox-background-checked: #6815ec}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #6815ec}"]}),l})();const _=function(){return{class:"enRojo",condicion:"row['saldo'] <1"}},S=function(){return{class:"enNaranja",condicion:"row['saldo'] >= 1 && row['saldo'] < 2"}},b=function(s,l){return[s,l]};let A=(()=>{var s;class l extends d.BasePage{constructor(n){super(n),this.myHttpService=n,this.columns=[{name:"Nombre",prop:"name",type:"text"},{name:"Saldo",prop:"saldo",type:"number",OrderInit:"ASC"},{name:"estado",prop:"estadoid",type:"number",filterInit:' "estadoid" <> 2',hide:!0},{name:"Bizum",prop:"",type:"action",icon:"card",action:"addBizum"},{name:"Saldo",prop:"",type:"action",icon:"logo-euro",action:"addSaldo"}],this.soloActivos=!0,this.entityName="User"}ngOnInit(){return(0,v.Z)(function*(){})()}soloActivoEvent(n){let t=this.columns.find(c=>"estado"==c.name);t&&(t.filterInit=this.soloActivos?"":' "estadoid" <> 2',this.getTableRefresh())}actionEmiter(n){switch(null==n?void 0:n.action){case"addBizum":this.rowAddBizum=n.row;break;case"addSaldo":this.rowAddSaldo=n.row}}}return(s=l).\u0275fac=function(n){return new(n||s)(e.Y36(d.MyHttpService))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-users"]],features:[e.qOj],decls:10,vars:15,consts:[["justify","start",3,"ngModel","ngModelChange","click"],[3,"title","entityName","columns","withCache","refresh","objNgClass","actionEmiter"],[3,"SetUser","saveEvent","cancelEvent"],[3,"SetUser","fromAdmin","saveEvent","cancelEvent"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-checkbox",0),e.NdJ("ngModelChange",function(u){return t.soloActivos=u})("click",function(u){return t.soloActivoEvent(u)}),e._uU(4,"Solo activos"),e.qZA()()(),e.TgZ(5,"ion-row")(6,"ion-col")(7,"my-table",1),e.NdJ("actionEmiter",function(u){return t.actionEmiter(u)}),e.qZA()()()(),e.TgZ(8,"add-saldo",2),e.NdJ("saveEvent",function(){return t.getTableRefresh()})("cancelEvent",function(){return t.rowAddSaldo=null}),e.qZA(),e.TgZ(9,"add-bizum",3),e.NdJ("saveEvent",function(){return t.getTableRefresh()})("cancelEvent",function(){return t.rowAddBizum=null}),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngModel",t.soloActivos),e.xp6(4),e.Q6J("title","Lud\xf3patas")("entityName",t.entityName)("columns",t.columns)("withCache",!0)("refresh",t.tableRefresh)("objNgClass",e.WLB(12,b,e.DdM(10,_),e.DdM(11,S))),e.xp6(1),e.Q6J("SetUser",t.rowAddSaldo),e.xp6(1),e.Q6J("SetUser",t.rowAddBizum)("fromAdmin",!0))},dependencies:[r.JJ,r.On,a.nz,a.wI,a.jY,a.Nd,a.w,d.MyTableComponent,g.I,h]}),l})();var U=i(3044),y=i(3355);const C=[{path:"",component:A}];let T=(()=>{var s;class l{}return(s=l).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.ez,r.u5,r.UX,a.Pc,U.Bz.forChild(C),d.SharedComponentsModule,y.S]}),l})()}}]);