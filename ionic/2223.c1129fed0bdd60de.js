"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2223],{2223:(M,h,a)=>{a.r(h),a.d(h,{TurnosPageModule:()=>S});var f=a(4755),d=a(9401),r=a(7002),p=a(9915),m=a(5861),u=a(8175),e=a(2504),T=a(7241),v=a(5591);function P(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-chip",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedPerson=null)}),e._uU(1,"Cancelar"),e.qZA()}2&n&&e.Q6J("outline",!0)}function C(n,s){1&n&&(e.TgZ(0,"ion-row")(1,"ion-col"),e._UZ(2,"ion-spinner",8),e.qZA()())}const y=[{path:"",component:(()=>{class n{constructor(t,o,i){this.utilService=t,this.seguridadService=o,this.myHttpService=i,this.aureBackColor="#ffc0cb",this.carmenBackColor="#c8e5d0",this.highlightedDates=[]}ngOnInit(){this.loadList()}loadList(){var t=this;return(0,m.Z)(function*(){let o=new u.a("get","gestion-casa","turnos");t.isLoading=!0,t.highlightedDates=[];const i=[],l=yield t.myHttpService.ejecuteURL(o);l&&(l.forEach(c=>{i.push({date:t.utilService.getYearFromISO(c.fecha),textColor:"black",backgroundColor:"aure"==c.quien?t.aureBackColor:t.carmenBackColor,id:c.id})}),t.highlightedDates=i,t.isLoading=!1)})()}ionChange(t){var o=this;return(0,m.Z)(function*(){let i=!1;const l=o.utilService.getYearFromISO(t.detail.value),c=o.highlightedDates.find(g=>g.date===l);if(c){o.isLoading=!0;let g=new u.a("delete","gestion-casa","turnos",null,null,c.id);yield o.myHttpService.ejecuteURL(g),i=!0}if(i&&!o.selectedPerson)return void o.loadList();if(!o.selectedPerson)return yield o.utilService.alert("Tienes que seleccionar a alguien"),void(i&&o.loadList());o.selectedDate=o.utilService.toISOString(new Date(t.detail.value));const L={fecha:o.selectedDate,quien:o.selectedPerson};o.isLoading=!0;let J=new u.a("post","gestion-casa","turnos",null,L);yield o.myHttpService.ejecuteURL(J),o.loadList()})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.f),e.Y36(v.F),e.Y36(u.y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["turnos-casa"]],decls:15,vars:12,consts:[["locale","es-ES","presentation","date",3,"readonly","firstDayOfWeek","highlightedDates","ionChange"],["size","3"],[3,"outline","click",4,"ngIf"],[3,"ngModel","ngModelChange"],["value","carmen","aria-label","Custom checkbox"],["value","aure","aria-label","Custom checkbox that is checked"],[4,"ngIf"],[3,"outline","click"],["name","dots"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-datetime",0),e.NdJ("ionChange",function(l){return o.ionChange(l)}),e.qZA()()(),e.TgZ(4,"ion-row")(5,"ion-col",1),e.YNc(6,P,2,1,"ion-chip",2),e.TgZ(7,"ion-radio-group",3),e.NdJ("ngModelChange",function(l){return o.selectedPerson=l}),e.TgZ(8,"p"),e._UZ(9,"ion-radio",4),e._uU(10," Carmen "),e.qZA(),e.TgZ(11,"p"),e._UZ(12,"ion-radio",5),e._uU(13," Aure "),e.qZA()()()(),e.YNc(14,C,3,0,"ion-row",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("readonly",o.isLoading)("firstDayOfWeek",1)("highlightedDates",o.highlightedDates),e.xp6(3),e.Q6J("ngIf",o.selectedPerson),e.xp6(1),e.Q6J("ngModel",o.selectedPerson),e.xp6(1),e.Jzz("background-color: ",o.carmenBackColor,";"),e.xp6(3),e.Jzz("background-color: ",o.aureBackColor,";"),e.xp6(3),e.Q6J("ngIf",o.isLoading))},dependencies:[f.O5,d.JJ,d.On,r.hM,r.wI,r.x4,r.jY,r.B7,r.se,r.Nd,r.PQ,r.U5,r.QI]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(y),p.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,d.u5,r.Pc,Z]}),n})()}}]);