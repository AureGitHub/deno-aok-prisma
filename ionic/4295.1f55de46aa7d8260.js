"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4295],{4295:(z,p,s)=>{s.r(p),s.d(p,{BizumPagePageModule:()=>b});var g=s(6814),d=s(95),r=s(2511),l=s(242),f=s(3044),c=s(5861),e=s(6689);const h=function(){return{class:"enNaranja",condicion:"row['estadoid'] == 1"}},y=function(){return{class:"enVerde",condicion:"row['estadoid'] == 2"}},P=function(a,u){return[a,u]},v=[{path:"",component:(()=>{var a;class u extends l.BasePage{constructor(t,n,o){super(t),this.myHttpService=t,this.utilService=n,this.alertController=o,this.columns=[{name:"De quien",prop:"dequien",type:"text"},{name:"importe",prop:"importe",type:"number"},{name:"F",prop:"fecha",type:"date",OrderInit:"ASC"},{name:"P.",prop:"estadoId",type:"action",icon:"swap-horizontal",filterInit:' ux."estadoId"=1 ',action:"updatePendiente"}],this.soloPendientes=!0,this.entityName="userxbizum"}ngOnInit(){return(0,c.Z)(function*(){})()}soloPendientesEvent(t){let n=this.columns.find(o=>"estadoId"==o.prop);n&&(n.filterInit=this.soloPendientes?"":' ux."estadoId"=1',this.getTableRefresh())}actionEmiter(t){"updatePendiente"===(null==t?void 0:t.action)&&this.updatePendiente(t.row)}updatePendiente(t){var n=this;return(0,c.Z)(function*(){try{const i=new l.classHttp("put",n.entityName,null,{estadoId:1==t.estadoid?2:1},t.id);(yield n.myHttpService.ejecuteURL(i))&&(n.utilService.message(l.typeMessage.success,"Guardado correctamente"),n.getTableRefresh())}catch{}})()}updatependientesAll_event(){var t=this;return(0,c.Z)(function*(){var o;yield(yield t.alertController.create({header:`Antenci\xf3n!! se van a pasar todos los bizum a NO pendientes (${t.TotalImporte} \u20ac). \xbfContinuar?`,buttons:[{text:"Cancelar",role:"cancel",handler:(o=(0,c.Z)(function*(){}),function(){return o.apply(this,arguments)})},{text:"OK",role:"confirm",handler:function(){var o=(0,c.Z)(function*(){yield t.updatependientesAll()});return function(){return o.apply(this,arguments)}}()}]})).present()})()}updatependientesAll(){var t=this;return(0,c.Z)(function*(){try{const n=new l.classHttp("put",t.entityName,"updatependientesAll",{});(yield t.myHttpService.ejecuteURL(n))&&(t.utilService.message(l.typeMessage.success,"Guardado correctamente"),t.getTableRefresh())}catch{}})()}onLoadDataEmiter(t){let n=t.filter(o=>1==o.estadoid);n=n.map(o=>o.importe),this.TotalImporte=n.reduce((o,i)=>o+Number(i),0)}}return(a=u).\u0275fac=function(t){return new(t||a)(e.Y36(l.MyHttpService),e.Y36(l.UtilService),e.Y36(r.Br))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-bizum"]],features:[e.qOj],decls:19,vars:14,consts:[[3,"enableOnOffLabels","ngModel","ngModelChange","click"],["color","danger",3,"click"],["slot","start","name","star"],["slot","start"],[3,"title","entityName","columns","withCache","refresh","objNgClass","actionEmiter","onLoadDataEmiter"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-toggle",0),e.NdJ("ngModelChange",function(i){return n.soloPendientes=i})("click",function(i){return n.soloPendientesEvent(i)}),e._uU(4,"Solo pendientes"),e.qZA()(),e.TgZ(5,"ion-col")(6,"ion-button",1),e.NdJ("click",function(){return n.updatependientesAll_event()}),e._UZ(7,"ion-icon",2),e._uU(8," Todos a NO pendientes "),e.qZA()()(),e.TgZ(9,"ion-row")(10,"ion-col")(11,"ion-item")(12,"ion-badge",3),e._uU(13),e.qZA(),e.TgZ(14,"ion-label"),e._uU(15,"Total bizum pendiente"),e.qZA()()()(),e.TgZ(16,"ion-row")(17,"ion-col")(18,"my-table",4),e.NdJ("actionEmiter",function(i){return n.actionEmiter(i)})("onLoadDataEmiter",function(i){return n.onLoadDataEmiter(i)}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("enableOnOffLabels",!0)("ngModel",n.soloPendientes),e.xp6(10),e.hij(" ",n.TotalImporte,""),e.xp6(5),e.Q6J("title","Bizums")("entityName",n.entityName)("columns",n.columns)("withCache",!0)("refresh",n.tableRefresh)("objNgClass",e.WLB(11,P,e.DdM(9,h),e.DdM(10,y))))},dependencies:[d.JJ,d.On,r.yp,r.YG,r.wI,r.jY,r.gu,r.Ie,r.Q$,r.Nd,r.ho,r.w,l.MyTableComponent]}),u})()}];let b=(()=>{var a;class u{}return(a=u).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[g.ez,d.u5,d.UX,r.Pc,f.Bz.forChild(v),l.SharedComponentsModule]}),u})()}}]);