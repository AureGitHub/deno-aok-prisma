"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1642],{1642:(H,m,s)=>{s.r(m),s.d(m,{AgendaPageModule:()=>q});var p=s(4755),C=s(9401),d=s(7002),D=s(9915),u=s(5861),_=s(8175),M=s(1699),e=s(2504),S=s(7241),T=s(6014),y=s(3720);const w=["slider"];function A(a,r){if(1&a&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.s9C("value",null==t?null:t.id),e.xp6(1),e.Oqu(t.cor)}}function Z(a,r){if(1&a&&(e.TgZ(0,"ion-select-option",14),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function P(a,r){if(1&a&&(e.TgZ(0,"ion-col",15),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.xp6(1),e.Oqu(t.cor)}}function b(a,r){if(1&a&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.TotalEncargos)}}function x(a,r){if(1&a&&(e.TgZ(0,"ion-col"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.TotalComidas)}}function E(a,r){if(1&a&&(e.TgZ(0,"ion-col",24),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t?null:t.TotalCenas)}}const Y=function(a,r,t){return{diasConEnventos:a,diasConEnventosSeleccionado:r,diasSinConEnventosSeleccionado:t}};function F(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-col",18),e.NdJ("click",function(){const o=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.selectDay(o))}),e.TgZ(1,"ion-grid",19)(2,"ion-row")(3,"ion-col"),e._uU(4),e.TgZ(5,"sup"),e.YNc(6,b,2,1,"span",20),e.qZA()()(),e.TgZ(7,"ion-row",21),e.YNc(8,x,2,1,"ion-col",22),e.YNc(9,E,2,1,"ion-col",23),e.qZA()()()}if(2&a){const t=r.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.kEZ(5,Y,(null==t?null:t.TotalComidas)+(null==t?null:t.TotalCenas)+(null==t?null:t.TotalEncargos)>0&&!(null!=t&&t.fecha&&(null==t?null:t.fecha.getTime())===(null==n.dateSelected?null:n.dateSelected.getTime())),(null==t?null:t.TotalComidas)+(null==t?null:t.TotalCenas)+(null==t?null:t.TotalEncargos)>0&&(null==t?null:t.fecha)&&(null==t?null:t.fecha.getTime())===(null==n.dateSelected?null:n.dateSelected.getTime()),(null==t?null:t.TotalComidas)+(null==t?null:t.TotalCenas)==0&&(null==t?null:t.fecha)&&(null==t?null:t.fecha.getTime())===(null==n.dateSelected?null:n.dateSelected.getTime()))),e.xp6(4),e.hij("",null==t?null:t.dia," "),e.xp6(2),e.Q6J("ngIf",(null==t?null:t.TotalEncargos)>0),e.xp6(2),e.Q6J("ngIf",(null==t?null:t.TotalComidas)>0),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.TotalCenas)>0)}}function O(a,r){if(1&a&&(e.TgZ(0,"ion-row",16),e.YNc(1,F,10,9,"ion-col",17),e.qZA()),2&a){const t=r.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}let k=(()=>{class a{set eventSource(t){this.setEventosInCalendar(t)}constructor(t){this.languageService=t,this.slideOpts={initialSlide:1,speed:400},this.refreshEnvents=new e.vpe,this.refreshSelectedDate=new e.vpe,this.getDateSelected=new e.vpe,this.dateSelected=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.dateParaMontarCalendar=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.today=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.months=[],this.Years=[],this.currentMonth=(new Date).getMonth(),this.currentYear=(new Date).getFullYear(),this.lstDiasMesinWeek=[]}ngOnInit(){this.setlanguaje(),this.Setyears(),this.getDiasMes(),this.refreshEnvents.emit(this.dateParaMontarCalendar),this.refreshSelectedDate.emit(this.dateSelected),this.TodayDesc=this.languageService.today[this.lan].des}changeDate(t,n){"month"==n?"add"==t?this.dateParaMontarCalendar.setMonth(this.dateParaMontarCalendar.getMonth()+1):"sub"==t&&this.dateParaMontarCalendar.setMonth(this.dateParaMontarCalendar.getMonth()-1):"year"==n&&("add"==t?this.dateParaMontarCalendar.setFullYear(this.dateParaMontarCalendar.getFullYear()+1):"sub"==t&&this.dateParaMontarCalendar.setFullYear(this.dateParaMontarCalendar.getFullYear()-1)),this.currentMonth=this.dateParaMontarCalendar.getMonth(),this.currentYear=this.dateParaMontarCalendar.getFullYear(),this.dateSelected=null,this.refreshSelectedDate.emit(this.dateSelected),this.refreshEnvents.emit(this.dateParaMontarCalendar),this.getDiasMes()}sliderChanges(){var t=this;return(0,u.Z)(function*(){const n=yield t.slider.getActiveIndex();2==n?t.changeDate("add","month"):0==n&&t.changeDate("sub","month"),t.slider.slideTo(1)})()}setEventosInCalendar(t){t&&this.lstDiasMesinWeek.forEach(n=>{n.forEach(i=>{i.fecha&&(i.TotalComidas=t.filter(o=>"comida"==o.servicio).filter(o=>o.fecha.getTime()===i.fecha.getTime()).length,i.TotalCenas=t.filter(o=>"cena"==o.servicio).filter(o=>o.fecha.getTime()===i.fecha.getTime()).length,i.TotalEncargos=t.filter(o=>"encargo"==o.servicio).filter(o=>o.fecha.getTime()===i.fecha.getTime()).length)})})}Setyears(){this.Years=[];for(var t=1930;t<(new Date).getFullYear()+10;t++)this.Years.push(t)}selectChangedMonth(t){this.currentMonth=parseInt(t.detail.value),this.dateParaMontarCalendar.setMonth(this.currentMonth),this.dateSelected&&this.currentMonth!=this.dateSelected.getMonth()&&(this.dateSelected=null),this.refreshEnvents.emit(this.dateParaMontarCalendar),this.getDiasMes()}selectChangedYear(t){this.currentYear=parseInt(t.detail.value),this.dateParaMontarCalendar.setFullYear(this.currentYear),this.currentYear!=this.dateSelected.getFullYear()&&(this.dateSelected=null),this.refreshEnvents.emit(this.dateParaMontarCalendar),this.getDiasMes()}SetToday(){this.dateParaMontarCalendar=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.currentMonth=this.dateParaMontarCalendar.getMonth(),this.currentYear=this.dateParaMontarCalendar.getFullYear(),this.getDiasMes(),this.dateSelected=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),this.refreshEnvents.emit(this.dateParaMontarCalendar),this.refreshSelectedDate.emit(this.dateSelected)}setlanguaje(){this.months=this.languageService.MonthsName[this.lan],this.days=this.languageService.daysName[this.lan]}padWithZero(t,n){return String(t).padStart(n,"0")}FormatShortDate(t){return t?`${this.padWithZero(t.getDate(),2)}/${this.padWithZero(t.getMonth()+1,2)}/${t.getFullYear()}`:"-"}getDiasMes(){var t=[];this.lstDiasMesinWeek=[];let n=this.dateParaMontarCalendar.getFullYear(),i=this.dateParaMontarCalendar.getMonth()+1,o=new Date(n,i,0).getDate();var c=new Date(n,i-1,1).getDay();if("EN"===this.lan)for(var l=1;l<=c;l++)t.push({dia:g,indice:l});else if(0==c)for(l=1;l<=6;l++)t.push({dia:g,indice:l});else for(l=1;l<c;l++)t.push({dia:g,indice:l});for(var g=1;g<=o;g++){var v=new Date(n,i-1,g);l=v.getDay(),t.push({fecha:v,dia:g,indice:l,TotalEnventos:0})}for(var h=[],f=1;f<=t.length;f++)h.push(t[f-1]),f%7==0&&(this.lstDiasMesinWeek.push(h),h=[]);if(h.length>0){for(f=h.length;f<7;f++)h.push({});this.lstDiasMesinWeek.push(h)}}selectDay(t){this.dateSelected=t&&t.fecha?t.fecha:this.dateSelected,this.refreshSelectedDate.emit(this.dateSelected),this.getDateSelected.emit(this.dateSelected)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.T))},a.\u0275cmp=e.Xpm({type:a,selectors:[["aure-date"]],viewQuery:function(t,n){if(1&t&&e.Gf(w,5),2&t){let i;e.iGM(i=e.CRH())&&(n.slider=i.first)}},inputs:{lan:"lan",eventSource:"eventSource"},outputs:{refreshEnvents:"refreshEnvents",refreshSelectedDate:"refreshSelectedDate",getDateSelected:"getDateSelected"},decls:22,vars:7,consts:[[1,"CabeceraDetalle"],["size","1",1,"CabeceraFilaDetalle"],[2,"font-size","10px","background-color","green",3,"click"],["size","1",3,"click"],["color","white","size","large","name","caret-back"],["size","1"],["color","white","size","large","name","caret-forward"],["size","3"],["interface","popover","placeholder","Mes",3,"value","ionChange"],[3,"value",4,"ngFor","ngForOf"],["interface","popover","placeholder","A\xf1o",3,"value","ionChange"],[1,"cabeceraNameDay"],["class","cabecera",4,"ngFor","ngForOf"],["class","cabeceraDay",4,"ngFor","ngForOf"],[3,"value"],[1,"cabecera"],[1,"cabeceraDay"],["class","dias",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"dias",3,"ngClass","click"],[2,"width","99%","padding","0","margin","0"],["class","Sub_Sup",4,"ngIf"],[1,"Sub_Sup"],[4,"ngIf"],["style","text-decoration: underline",4,"ngIf"],[2,"text-decoration","underline"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row",0)(2,"ion-col",1)(3,"span",2),e.NdJ("click",function(){return n.SetToday()}),e._uU(4),e.qZA()(),e.TgZ(5,"ion-col",3),e.NdJ("click",function(){return n.changeDate("sub","month")}),e._UZ(6,"ion-icon",4),e.qZA(),e._UZ(7,"ion-col",5),e.TgZ(8,"ion-col",3),e.NdJ("click",function(){return n.changeDate("add","month")}),e._UZ(9,"ion-icon",6),e.qZA(),e._UZ(10,"ion-col",5),e.TgZ(11,"ion-col",7)(12,"ion-select",8),e.NdJ("ionChange",function(o){return n.selectChangedMonth(o)}),e.YNc(13,A,2,2,"ion-select-option",9),e.qZA()(),e.TgZ(14,"ion-col",5),e._uU(15,"de"),e.qZA(),e.TgZ(16,"ion-col",7)(17,"ion-select",10),e.NdJ("ionChange",function(o){return n.selectChangedYear(o)}),e.YNc(18,Z,2,2,"ion-select-option",9),e.qZA()()(),e.TgZ(19,"ion-row",11),e.YNc(20,P,2,1,"ion-col",12),e.qZA(),e.YNc(21,O,2,1,"ion-row",13),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.TodayDesc),e.xp6(8),e.s9C("value",n.currentMonth),e.xp6(1),e.Q6J("ngForOf",n.months),e.xp6(4),e.s9C("value",n.currentYear),e.xp6(1),e.Q6J("ngForOf",n.Years),e.xp6(2),e.Q6J("ngForOf",n.days),e.xp6(1),e.Q6J("ngForOf",n.lstDiasMesinWeek))},dependencies:[p.mk,p.sg,p.O5,d.wI,d.jY,d.gu,d.Nd,d.t9,d.n0,d.QI],styles:[".CabeceraDetalle[_ngcontent-%COMP%]{border-style:solid;display:flex;font-size:15px;font-weight:700;align-items:center;justify-content:center;vertical-align:center;background-color:navy;color:#f5f5f5;border-radius:3px}.cabeceraNameDay[_ngcontent-%COMP%]{background-color:#848484}.cabeceraDay[_ngcontent-%COMP%]{background-color:#f2f2f2}.ColCabeceraIconNav[_ngcontent-%COMP%]{display:flex;font-size:13px;align-items:center;cursor:pointer}.CabeceraIconNav[_ngcontent-%COMP%]{background-color:#a9a9a9}.cabecera[_ngcontent-%COMP%]{border-style:solid;border-width:1px;display:flex;align-items:center;justify-content:center}.dias[_ngcontent-%COMP%]{font-size:14px;font-weight:700;border-style:solid;border-width:1px;display:flex;align-items:center;justify-content:center;min-height:40px;border-radius:3px}.detalleDay[_ngcontent-%COMP%]{font-size:10px}.diaActual[_ngcontent-%COMP%]{font-weight:700;color:#0b3b0b}.diasConEnventos[_ngcontent-%COMP%]{color:#000;background-color:#6e6e6e;color:#fff}.Sub_Sup[_ngcontent-%COMP%]{font-size:8px}.diasConEnventosSeleccionado[_ngcontent-%COMP%]{background-color:#bdbdbd;color:#000}.diasSinConEnventosSeleccionado[_ngcontent-%COMP%]{background-color:#bdbdbd;color:#fff}"]}),a})();function N(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",4),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.add())}),e._UZ(1,"ion-icon",5),e.qZA()}}function J(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"ion-button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.entityDescripcion=null)}),e._UZ(1,"ion-icon",7),e.qZA()}}function I(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"app-editor-entity",8),e.NdJ("saveEvent",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.save(i))})("deleteEvent",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.borrar(i))}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("entity",t.entitySelected)("setEntity",t.entityDescripcion)("isSaving",t.isSaving)("isDeleting",t.isDeleting)}}const U=[{path:"",component:(()=>{class a{constructor(t,n){this.utilService=t,this.myHttpService=n,this.highlightedDates=[],this.entityName="agenda"}ngOnInit(){var t=this;return(0,u.Z)(function*(){yield t.loadList(),t.TodayDate=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())})()}ionViewWillEnter(){return(0,u.Z)(function*(){})()}loadList(){var t=this;return(0,u.Z)(function*(){let n=new _.a("get","gestion-casa","turnos");t.isLoading=!0,t.highlightedDates=[];const i=[],o=yield t.myHttpService.ejecuteURL(n);o&&(o.forEach(c=>{const l=new Date(new Date(c.fecha).getFullYear(),new Date(c.fecha).getMonth(),new Date(c.fecha).getDate());i.push({title:"title",fecha:l,servicio:"comida"})}),t.highlightedDates=i,t.isLoading=!1)})()}ionChange(t){return(0,u.Z)(function*(){})()}refreshEnvents(t){var n=this;return(0,u.Z)(function*(){yield n.loadList()})()}refreshSelectedDate(t){var n=this;return(0,u.Z)(function*(){n.selectedTime=t})()}add(){const t=this.utilService.toISOString(new Date);this.entitySelected={fecha:t},this.entityDescripcion=M.Z.giveMeEntity(this.entityName)}save(t){var n=this;return(0,u.Z)(function*(){n.isSaving=!0;const i=t.id?"put":"post",o=t.id?t.id.toString():null,c=new _.a(i,"gestion-casa","servicios",null,t,o);yield n.myHttpService.ejecuteURL(c),n.entityDescripcion=null,n.isSaving=!1,n.loadList()})()}borrar(t){var n=this;return(0,u.Z)(function*(){n.isDeleting=!0;const o=t.id.toString(),c=new _.a("delete","gestion-casa","servicios",null,null,o);yield n.myHttpService.ejecuteURL(c),n.entityDescripcion=null,n.isDeleting=!1,n.loadList()})()}cancel(){}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(S.f),e.Y36(_.y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["agenda-casa"]],decls:4,vars:5,consts:[["color","primary",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],[4,"ngIf"],[3,"lan","eventSource","refreshEnvents","refreshSelectedDate"],["color","primary",3,"click"],["slot","icon-only","name","add-outline"],["color","danger",3,"click"],["slot","icon-only","name","arrow-back-outline"],[3,"entity","setEntity","isSaving","isDeleting","saveEvent","deleteEvent"]],template:function(t,n){1&t&&(e.YNc(0,N,2,0,"ion-button",0),e.YNc(1,J,2,0,"ion-button",1),e.YNc(2,I,2,4,"div",2),e.TgZ(3,"aure-date",3),e.NdJ("refreshEnvents",function(o){return n.refreshEnvents(o)})("refreshSelectedDate",function(o){return n.refreshSelectedDate(o)}),e.qZA()),2&t&&(e.Q6J("ngIf",!n.entityDescripcion),e.xp6(1),e.Q6J("ngIf",n.entityDescripcion),e.xp6(1),e.Q6J("ngIf",n.entityDescripcion),e.xp6(1),e.Q6J("lan","ES")("eventSource",n.highlightedDates))},dependencies:[p.O5,d.YG,d.gu,T.G,k]}),a})()}];let Q=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[D.Bz.forChild(U),D.Bz]}),a})();var j=s(3399);let q=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[p.ez,C.u5,d.Pc,Q,j.q]}),a})()}}]);