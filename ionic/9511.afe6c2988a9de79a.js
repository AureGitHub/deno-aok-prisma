"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9511],{1699:(I,E,c)=>{c.d(E,{Z:()=>t});var i=c(9401);class t{static giveMeEntity(f){switch(f){case"empleada":return[{name:"nombre",type:"text",title:"nombre",validators:[i.kI.required]},{name:"baja",type:"checkbox",title:"baja",default:!1}];case"servicio":return[{name:"empleadaId",type:"select",title:"Empleada",multiple:!1,coleccion:"empleada",id:"id",desc:"nombre",validators:[i.kI.required]},{name:"fecha",type:"date",title:"fecha",validators:[i.kI.required]},{name:"horaInicio",type:"time",title:"Hora inicio",validators:[i.kI.required]},{name:"horaFin",type:"time",title:"hora fin",validators:[i.kI.required]},{name:"suplLevantar",type:"checkbox",title:"sup. Levantar",default:!0},{name:"pagado",type:"checkbox",title:"pagado",default:!1},{name:"observacion",type:"text",title:"observaci\xf3n"}];case"agenda":return[{name:"fecha",type:"date",title:"fecha",validators:[i.kI.required]},{name:"tipoagendaId",type:"select",title:"Tipo",multiple:!1,coleccion:"tipoagenda",id:"id",desc:"descripcion",validators:[i.kI.required]},{name:"observacion",type:"text",title:"observaci\xf3n",validators:[i.kI.required]}];case"gasto":return[{name:"fecha",type:"date",title:"fecha",validators:[i.kI.required]},{name:"tipogastoId",type:"select",title:"Tipo",multiple:!1,coleccion:"tipogasto",id:"id",desc:"descripcion",validators:[i.kI.required],excluir:["servicio"]},{name:"importe",type:"number",title:"importe",validators:[i.kI.required]},{name:"observacion",type:"text",title:"observaci\xf3n"},{name:"pendientecobro",type:"checkbox",title:"Pte Cobro",default:!1}];case"tipo":return[{name:"descripcion",type:"text",title:"descripci\xf3n",validators:[i.kI.required]},{name:"color",type:"text",title:"color",validators:[i.kI.required]}];case"producto":return[{name:"descripcion",type:"text",title:"descripci\xf3n",validators:[i.kI.required]}];case"configuracion":return[{name:"key",type:"text",title:"key",validators:[i.kI.required]},{name:"value",type:"text",title:"value",validators:[i.kI.required]}]}return[]}}},6014:(I,E,c)=>{c.d(E,{G:()=>W});var i=c(5861),t=c(2504),d=c(9401),f=c(9722),h=c(6575),l=c(7002),x=c(7241),C=c(5591),g=c(4755);function m(n,_){if(1&n&&(t.ynx(0),t._UZ(1,"ion-input",6),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("placeholder",e.title),t.s9C("formControlName",e.name)}}function u(n,_){if(1&n&&(t.ynx(0),t._UZ(1,"ion-input",7),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("placeholder",e.title),t.s9C("formControlName",e.name)}}function s(n,_){if(1&n&&(t.ynx(0),t._UZ(1,"ion-checkbox",8),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("formControlName",e.name)}}function p(n,_){if(1&n&&(t.TgZ(0,"ion-select-option",12),t._uU(1),t.qZA()),2&n){const e=_.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.desc)}}function y(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"ion-select",10),t.NdJ("ionChange",function(o){t.CHM(e);const r=t.oxw(3).$implicit,v=t.oxw(2);return t.KtG(v.select_onChange(r.name,o))}),t.YNc(1,p,2,2,"ion-select-option",11),t.qZA()}if(2&n){const e=t.oxw(3).$implicit,a=t.oxw(2);t.MGl("name","'",e.name,"'"),t.s9C("formControlName",e.name),t.xp6(1),t.Q6J("ngForOf",a.objlstSelect[e.name])}}function Z(n,_){if(1&n&&(t.ynx(0),t.YNc(1,y,2,3,"ion-select",9),t.BQk()),2&n){const e=t.oxw(2).$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.objlstSelect[e.name])}}function O(n,_){if(1&n&&t._UZ(0,"ion-datetime",15),2&n){const e=t.oxw(3).$implicit;t.s9C("formControlName",e.name),t.Q6J("firstDayOfWeek",1)}}function M(n,_){1&n&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"ion-item"),t._UZ(3,"ion-datetime-button",13),t.TgZ(4,"ion-modal",14),t.YNc(5,O,1,2,"ng-template"),t.qZA()(),t.BQk()),2&n&&(t.xp6(4),t.Q6J("keepContentsMounted",!0))}function N(n,_){if(1&n&&t._UZ(0,"ion-datetime",17),2&n){const e=t.oxw(3).$implicit;t.MGl("id","datetime_",e.name,""),t.s9C("formControlName",e.name),t.Q6J("firstDayOfWeek",1)("preferWheel",!1)}}function w(n,_){if(1&n&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"ion-item"),t._UZ(3,"ion-datetime-button",16),t.TgZ(4,"ion-modal",14),t.YNc(5,N,1,4,"ng-template"),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.MGl("datetime","datetime_",e.name,""),t.xp6(1),t.Q6J("keepContentsMounted",!0)}}function D(n,_){if(1&n&&t._UZ(0,"ion-datetime",18),2&n){const e=t.oxw(3).$implicit;t.MGl("id","datetime_",e.name,""),t.s9C("formControlName",e.name),t.Q6J("firstDayOfWeek",1)("preferWheel",!1)}}function P(n,_){if(1&n&&(t.ynx(0),t._UZ(1,"br"),t.TgZ(2,"ion-item"),t._UZ(3,"ion-datetime-button",16),t.TgZ(4,"ion-modal",14),t.YNc(5,D,1,4,"ng-template"),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.MGl("datetime","datetime_",e.name,""),t.xp6(1),t.Q6J("keepContentsMounted",!0)}}function S(n,_){if(1&n&&(t.ynx(0),t.TgZ(1,"ion-label",3),t._uU(2),t.qZA(),t.ynx(3,4),t.YNc(4,m,2,2,"ng-container",5),t.YNc(5,u,2,2,"ng-container",5),t.YNc(6,s,2,1,"ng-container",5),t.YNc(7,Z,2,1,"ng-container",5),t.YNc(8,M,6,1,"ng-container",5),t.YNc(9,w,6,2,"ng-container",5),t.YNc(10,P,6,2,"ng-container",5),t.BQk()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase","text"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","checkbox"),t.xp6(1),t.Q6J("ngSwitchCase","select"),t.xp6(1),t.Q6J("ngSwitchCase","datetime"),t.xp6(1),t.Q6J("ngSwitchCase","date"),t.xp6(1),t.Q6J("ngSwitchCase","time")}}function Q(n,_){if(1&n&&(t.TgZ(0,"ion-item"),t.YNc(1,S,11,9,"ng-container",1),t.qZA()),2&n){const e=_.$implicit;t.xp6(1),t.Q6J("ngIf",!e.hide)}}function U(n,_){1&n&&t._UZ(0,"ion-spinner")}function A(n,_){1&n&&(t.TgZ(0,"ion-label"),t._uU(1,"Guardar"),t.qZA())}function J(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.borrar())}),t._UZ(1,"ion-icon",25),t._uU(2," Borrar "),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("disabled",e.isDeleting)}}function G(n,_){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item")(1,"ion-button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onSubmit())}),t._UZ(2,"ion-icon",20),t.YNc(3,U,1,0,"ion-spinner",1),t.YNc(4,A,2,0,"ion-label",1),t.qZA(),t.TgZ(5,"ion-button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cancelar())}),t._UZ(6,"ion-icon",22),t._uU(7," Cancelar "),t.qZA(),t.YNc(8,J,3,1,"ion-button",23),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.isSaving||!e.formGroup.valid),t.xp6(2),t.Q6J("ngIf",e.isSaving),t.xp6(1),t.Q6J("ngIf",!e.isSaving),t.xp6(4),t.Q6J("ngIf",!e.isAlta)}}function Y(n,_){if(1&n&&(t.TgZ(0,"ion-list"),t._UZ(1,"ion-item"),t.YNc(2,Q,2,1,"ion-item",2),t.YNc(3,G,9,4,"ion-item",1),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.lstInput),t.xp6(1),t.Q6J("ngIf",e.havePermision)}}let W=(()=>{class n{set entityRefresh(e){if(e)for(let a in e)this.formGroup.controls[a].setValue(e[a])}set setEntity(e){this.lstInput=e;const a={};e.forEach(o=>{if(a[o.name]=new d.NI(""),o.validators){const r=[];o.validators.forEach(v=>{r.push(v)}),r.length>0&&a[o.name].setValidators(r)}}),this.formGroup=new d.cw(a),this.entity.id?(this.formGroup.addControl("id",new d.NI("")),this.formGroup.controls.id.setValue(this.entity.id),e.forEach(o=>{this.formGroup.controls[o.name].setValue(this.entity[o.name])})):(e.forEach(o=>{this.entity[o.name]&&this.formGroup.controls[o.name].setValue(this.entity[o.name])}),e.forEach(o=>{o.hasOwnProperty("default")&&this.formGroup.controls[o.name].setValue(o.default)})),this.CreateListForSelect(e)}constructor(e,a,o,r){this.alertController=e,this.utilService=a,this.myHttpService=o,this.seguridadService=r,this.WhoHasPermision=[h.u.ADMIN,h.u.GOD],this.havePermision=!1,this.lstInput=[],this.isSaving=!1,this.isDeleting=!1,this.objlstSelect={},this.saveEvent=new t.vpe,this.deleteEvent=new t.vpe,this.cancelEvent=new t.vpe,this.selectEvent=new t.vpe,this.isAlta=!1}ngOnInit(){const e=this.seguridadService.UserGet();this.havePermision=this.WhoHasPermision.some(a=>a==e.role)}CreateListForSelect(e){var a=this;e.forEach(function(){var o=(0,i.Z)(function*(r){if("select"==r.type){const L=new f.a("get","gestion-casa",r.coleccion);let B=yield a.myHttpService.ejecuteURL(L),k=[{id:null,desc:"seleccione.."}];B.forEach(T=>{let b=!0;null!=r&&r.excluir&&r.excluir.some(K=>K==T[r.desc])&&(b=!1),b&&k.push({id:parseInt(T[r.id]),desc:T[r.desc]})}),a.objlstSelect[r.name]=k}});return function(r){return o.apply(this,arguments)}}())}onSubmit(){this.lstInput.forEach(e=>{if(("date"==e.type||"datetime"==e.type||"time"==e.type)&&this.formGroup.controls[e.name].dirty){new Date(this.formGroup.controls[e.name].value);let o=this.utilService.toISOString(new Date(this.formGroup.controls[e.name].value));this.formGroup.controls[e.name].setValue(o)}}),this.saveEvent.emit(this.formGroup.value)}borrar(){var e=this;return(0,i.Z)(function*(){yield(yield e.alertController.create({header:"Antenci\xf3n!! se va a borrar el elemento. \xbfContinuar?",buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"OK",role:"confirm",handler:()=>{e.deleteEvent.emit(e.formGroup.value)}}]})).present()})()}cancelar(){this.cancelEvent.emit(!0)}transformDate(e){let a=e.getFullYear(),o=e.getMonth()+1,r=e.getDate();return`${a}-${o<10?"0"+o:o}-${r<10?"0"+r:r}`}select_onChange(e,a){this.selectEvent.emit({field:e,event:a})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.Br),t.Y36(x.f),t.Y36(f.y),t.Y36(C.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editor-entity"]],inputs:{entity:"entity",isAlta:"isAlta",entityRefresh:"entityRefresh",setEntity:"setEntity"},outputs:{saveEvent:"saveEvent",deleteEvent:"deleteEvent",cancelEvent:"cancelEvent",selectEvent:"selectEvent"},decls:2,vars:2,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],[4,"ngFor","ngForOf"],["position","stacked"],[3,"ngSwitch"],[4,"ngSwitchCase"],["type","text",3,"placeholder","formControlName"],["type","number",3,"placeholder","formControlName"],[3,"formControlName"],["interface","popover","placeholder","Seleccione",3,"name","formControlName","ionChange",4,"ngIf"],["interface","popover","placeholder","Seleccione",3,"name","formControlName","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["datetime","datetime"],[3,"keepContentsMounted"],["locale","es-ES","id","datetime",3,"firstDayOfWeek","formControlName"],[3,"datetime"],["presentation","date","locale","es-ES",3,"firstDayOfWeek","id","preferWheel","formControlName"],["presentation","time","locale","es-ES",3,"firstDayOfWeek","id","preferWheel","formControlName"],["color","success",3,"disabled","click"],["slot","start","name","save"],["color","warning",3,"click"],["name","arrow-back-outline"],["color","danger",3,"disabled","click",4,"ngIf"],["color","danger",3,"disabled","click"],["slot","start","name","close-circle"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.onSubmit()}),t.YNc(1,Y,4,2,"ion-list",1),t.qZA()),2&e&&(t.Q6J("formGroup",a.formGroup),t.xp6(1),t.Q6J("ngIf",a.lstInput))},dependencies:[g.sg,g.O5,g.RF,g.n9,l.YG,l.nz,l.x4,l.Mj,l.gu,l.pK,l.Ie,l.Q$,l.q_,l.t9,l.n0,l.PQ,l.ki,l.w,l.as,l.QI,l.j9,d._Y,d.JJ,d.JL,d.sg,d.u]}),n})()},3380:(I,E,c)=>{c.d(E,{d:()=>g});var i=c(2504),t=c(6575),d=c(5591),f=c(4755),h=c(7002);function l(m,u){if(1&m){const s=i.EpF();i.TgZ(0,"ion-icon",3),i.NdJ("click",function(){i.CHM(s);const y=i.oxw();return i.KtG(y.add())}),i.qZA()}}function x(m,u){if(1&m){const s=i.EpF();i.TgZ(0,"ion-icon",4),i.NdJ("click",function(){i.CHM(s);const y=i.oxw();return i.KtG(y.cancel())}),i.qZA()}}function C(m,u){1&m&&i._UZ(0,"ion-spinner",5)}let g=(()=>{class m{constructor(s){this.seguridadService=s,this.addToolEntity=new i.vpe,this.cancelToolEntity=new i.vpe,this.WhoHasPermision=[t.u.ADMIN,t.u.GOD],this.havePermision=!1}ngOnInit(){const s=this.seguridadService.UserGet();this.havePermision=this.WhoHasPermision.some(p=>p==s.role)}add(){this.addToolEntity.emit(!0)}cancel(){this.cancelToolEntity.emit(!0)}}return m.\u0275fac=function(s){return new(s||m)(i.Y36(d.F))},m.\u0275cmp=i.Xpm({type:m,selectors:[["app-tool-entity"]],inputs:{isLoading:"isLoading",entityDescripcion:"entityDescripcion"},outputs:{addToolEntity:"addToolEntity",cancelToolEntity:"cancelToolEntity"},decls:3,vars:3,consts:[["class","hand","style","font-size: 30px;","color","primary","slot","icon-only","name","add-circle",3,"click",4,"ngIf"],["class","hand","style","font-size: 30px;","color","warning","slot","icon-only","name","arrow-back-outline",3,"click",4,"ngIf"],["name","dots",4,"ngIf"],["color","primary","slot","icon-only","name","add-circle",1,"hand",2,"font-size","30px",3,"click"],["color","warning","slot","icon-only","name","arrow-back-outline",1,"hand",2,"font-size","30px",3,"click"],["name","dots"]],template:function(s,p){1&s&&(i.YNc(0,l,1,0,"ion-icon",0),i.YNc(1,x,1,0,"ion-icon",1),i.YNc(2,C,1,0,"ion-spinner",2)),2&s&&(i.Q6J("ngIf",p.havePermision&&!p.isLoading&&!p.entityDescripcion),i.xp6(1),i.Q6J("ngIf",!p.isLoading&&p.entityDescripcion),i.xp6(1),i.Q6J("ngIf",p.isLoading))},dependencies:[f.O5,h.gu,h.PQ],styles:[".conectado[_ngcontent-%COMP%]{color:green}"]}),m})()}}]);