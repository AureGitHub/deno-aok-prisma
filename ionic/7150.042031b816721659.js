"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7150],{7150:(M,v,r)=>{r.r(v),r.d(v,{ServiciosPageModule:()=>q});var d=r(4755),p=r(9401),a=r(7002),_=r(9915),u=r(5861),f=r(1699),g=r(8175),e=r(2504),h=r(7241),m=r(6014),y=r(3380);function S(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"app-editor-entity",9),e.NdJ("saveEvent",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.save(n))})("deleteEvent",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.borrar(n))})("cancelEvent",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancelToolEntity())})("selectEvent",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectEvent(n))}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("entity",t.entitySelected)("setEntity",t.entityDescripcion)("entityRefresh",t.entityRefresh)("isSaving",t.isSaving)("isDeleting",t.isDeleting)("isAlta",t.isAlta)}}function Z(s,l){1&s&&e._UZ(0,"ion-icon",12)}function T(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-row",10),e.NdJ("click",function(){const o=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectItem(o))}),e.TgZ(1,"ion-col"),e._uU(2),e.qZA(),e.TgZ(3,"ion-col"),e._uU(4),e.qZA(),e.TgZ(5,"ion-col"),e.YNc(6,Z,1,0,"ion-icon",11),e.qZA(),e.TgZ(7,"ion-col"),e._uU(8),e.qZA(),e.TgZ(9,"ion-col"),e._uU(10),e.qZA()()}if(2&s){const t=l.$implicit;e.Q6J("ngClass",t.pagado?"tableRow_pagado":"tableRow"),e.xp6(2),e.lnq(" ",t.fecha," ",t.horainicio,"-",t.horafin," "),e.xp6(2),e.Oqu(t.nombreempleada),e.xp6(2),e.Q6J("ngIf",t.suplLevantar),e.xp6(2),e.Oqu(t.horas),e.xp6(2),e.AsE("",t.euros,".",t.supllevantar,"")}}function P(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"ion-row",13)(1,"ion-col"),e._uU(2),e.qZA(),e.TgZ(3,"ion-col"),e._uU(4),e.qZA(),e.TgZ(5,"ion-col"),e._uU(6),e.qZA(),e.TgZ(7,"ion-col")(8,"ion-chip",14),e.NdJ("click",function(){const o=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectItemResumen(o))}),e._uU(9,"Pagar"),e.qZA()()()}if(2&s){const t=l.$implicit;e.xp6(2),e.Oqu(t.nombreempleada),e.xp6(2),e.Oqu(t.horas),e.xp6(2),e.Oqu(t.euros)}}const x=[{path:"",component:(()=>{class s{constructor(t,i,n){this.myHttpService=t,this.utilService=i,this.alertController=n,this.isLoading=!1,this.entityName="servicio",this.busquedaPagado="n",this.entityRefresh=null}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.loadList(t.busquedaPagado)})()}handleChangeBusquedaPagado(t){this.loadList(this.busquedaPagado)}loadList(t=null){var i=this;return(0,u.Z)(function*(){let n="";t&&(n+=`pagado=${i.busquedaPagado}`);let o=new g.a("get","gestion-casa","servicios","getPresent",null,null,n);i.isLoading=!0,i.lstServicios=[],i.lstServicios=yield i.myHttpService.ejecuteURL(o),o=new g.a("get","gestion-casa","servicios","getResumenNoPagado"),i.lstResumenServicios=[],i.lstResumenServicios=yield i.myHttpService.ejecuteURL(o),i.isLoading=!1})()}addToolEntity(){this.entityRefresh=null;const t=this.utilService.toISOString(new Date);let i=new Date;i.setHours(10),i.setMinutes(0);let n=new Date;n.setHours(13),n.setMinutes(0);const o=this.utilService.toISOString(i),c=this.utilService.toISOString(n);this.entitySelected={fecha:t,horaInicio:o,horaFin:c},this.entityDescripcion=f.Z.giveMeEntity(this.entityName)}cancelToolEntity(){this.entityDescripcion=null}selectItem(t){var i=this;return(0,u.Z)(function*(){i.entityRefresh=null;const n=new g.a("get","gestion-casa","servicios",null,null,t.id);i.entitySelected=yield i.myHttpService.ejecuteURL(n),i.entityDescripcion=f.Z.giveMeEntity(i.entityName)})()}selectItemResumen(t){var i=this;return(0,u.Z)(function*(){var o;yield(yield i.alertController.create({header:`Antenci\xf3n!! Todos los servicios de ${t.nombreempleada} van a pasar a PAGADOS. \xbfContinuar?`,buttons:[{text:"Cancelar",role:"cancel",handler:()=>{}},{text:"OK",role:"confirm",handler:(o=(0,u.Z)(function*(){let c=new g.a("put","gestion-casa","servicios","upServPagado",{pagado:!0},t.empleadaid,null);yield i.myHttpService.ejecuteURL(c),i.loadList(i.busquedaPagado)}),function(){return o.apply(this,arguments)})}]})).present()})()}save(t){var i=this;return(0,u.Z)(function*(){i.isSaving=!0;const n=t.id?"put":"post",o=t.id?t.id.toString():null,c=new g.a(n,"gestion-casa","servicios",null,t,o);yield i.myHttpService.ejecuteURL(c),i.entityDescripcion=null,i.isSaving=!1,i.loadList(i.busquedaPagado)})()}borrar(t){var i=this;return(0,u.Z)(function*(){i.isDeleting=!0;const o=t.id.toString(),c=new g.a("delete","gestion-casa","servicios",null,null,o);yield i.myHttpService.ejecuteURL(c),i.entityDescripcion=null,i.isDeleting=!1,i.loadList(i.busquedaPagado)})()}cancel(){}selectEvent(t){if("empleadaId"==t.field){const i=this.utilService.toISOString(new Date);let n=new Date,o=new Date;n.setHours(10),n.setMinutes(0),o.setHours(13),o.setMinutes(0),2==t.event.detail.value&&(n.setHours(9),n.setMinutes(30),o.setHours(12),o.setMinutes(30));const c=this.utilService.toISOString(n),C=this.utilService.toISOString(o);this.entityRefresh={fecha:i,horaInicio:c,horaFin:C}}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(g.y),e.Y36(h.f),e.Y36(a.Br))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-servicios"]],decls:42,vars:6,consts:[[3,"isLoading","entityDescripcion","addToolEntity","cancelToolEntity"],[4,"ngIf"],["aria-label","Fruit","interface","popover",3,"ngModel","ngModelChange","ionChange"],["value","n"],["value","s"],["value","t"],[1,"tableTitle"],[3,"ngClass","click",4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngFor","ngForOf"],[3,"entity","setEntity","entityRefresh","isSaving","isDeleting","isAlta","saveEvent","deleteEvent","cancelEvent","selectEvent"],[3,"ngClass","click"],["name","checkmark-outline",4,"ngIf"],["name","checkmark-outline"],[2,"text-align","center"],["color","danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"app-tool-entity",0),e.NdJ("addToolEntity",function(){return i.addToolEntity()})("cancelToolEntity",function(){return i.cancelToolEntity()}),e.qZA(),e.YNc(1,S,2,6,"div",1),e.TgZ(2,"ion-card")(3,"ion-card-title"),e._uU(4,"Servicios "),e.TgZ(5,"ion-select",2),e.NdJ("ngModelChange",function(o){return i.busquedaPagado=o})("ionChange",function(o){return i.handleChangeBusquedaPagado(o)}),e.TgZ(6,"ion-select-option",3),e._uU(7,"No pagados"),e.qZA(),e.TgZ(8,"ion-select-option",4),e._uU(9,"Pagados"),e.qZA(),e.TgZ(10,"ion-select-option",5),e._uU(11,"Todos"),e.qZA()()(),e._UZ(12,"ion-card-subtitle"),e.TgZ(13,"ion-card-content")(14,"ion-grid")(15,"ion-row",6)(16,"ion-col"),e._uU(17,"fecha"),e.qZA(),e.TgZ(18,"ion-col"),e._uU(19,"Nombre"),e.qZA(),e.TgZ(20,"ion-col"),e._uU(21,"Lev"),e.qZA(),e.TgZ(22,"ion-col"),e._uU(23,"horas"),e.qZA(),e.TgZ(24,"ion-col"),e._uU(25,"euros"),e.qZA()(),e.YNc(26,T,11,9,"ion-row",7),e.qZA()()(),e.TgZ(27,"ion-card")(28,"ion-card-title"),e._uU(29,"Resumen Pagos"),e.qZA(),e.TgZ(30,"ion-card-content")(31,"ion-grid")(32,"ion-row",6)(33,"ion-col"),e._uU(34,"nombre"),e.qZA(),e.TgZ(35,"ion-col"),e._uU(36,"horas"),e.qZA(),e.TgZ(37,"ion-col"),e._uU(38,"Euros"),e.qZA(),e.TgZ(39,"ion-col"),e._uU(40,"Acci\xf3n"),e.qZA()(),e.YNc(41,P,10,3,"ion-row",8),e.qZA()()()),2&t&&(e.Q6J("isLoading",i.isLoading)("entityDescripcion",i.entityDescripcion),e.xp6(1),e.Q6J("ngIf",i.entityDescripcion),e.xp6(4),e.Q6J("ngModel",i.busquedaPagado),e.xp6(21),e.Q6J("ngForOf",i.lstServicios),e.xp6(15),e.Q6J("ngForOf",i.lstResumenServicios))},dependencies:[d.mk,d.sg,d.O5,p.JJ,p.On,a.PM,a.FN,a.tO,a.Dq,a.hM,a.wI,a.jY,a.gu,a.Nd,a.t9,a.n0,a.QI,m.G,y.d],styles:[".tableTitle[_ngcontent-%COMP%]{text-align:center;color:#fff;background-color:#444242;font-weight:700;font-size:14px}.tableRow[_ngcontent-%COMP%]{text-align:center;font-size:13px;border:1px solid;cursor:pointer;background-color:#fff}.tableRow_pagado[_ngcontent-%COMP%]{background-color:#cff7cf;text-align:center;font-size:13px;border:1px solid;cursor:pointer}.tableRowSeleded[_ngcontent-%COMP%]{text-align:center;color:#fff;background-color:#00008b;cursor:pointer}.tableRow[_ngcontent-%COMP%]:hover{color:#fff;background-color:#00008b}"]}),s})()}];let A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_.Bz.forChild(x),_.Bz]}),s})();var E=r(7147);let q=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.ez,p.u5,a.Pc,A,E.q]}),s})()}}]);