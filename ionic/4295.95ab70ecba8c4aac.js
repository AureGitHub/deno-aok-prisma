"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4295],{4295:(P,m,l)=>{l.r(m),l.d(m,{BizumPagePageModule:()=>y});var g=l(6814),d=l(95),a=l(2511),s=l(242),h=l(3044),u=l(5861),e=l(6689);const f=[{path:"",component:(()=>{var o;class c extends s.BasePage{constructor(t,n,i){super(t),this.myHttpService=t,this.utilService=n,this.alertController=i,this.columns=[{name:"De quien",prop:"dequien",type:"text"},{name:"importe",prop:"importe",type:"number"},{name:"F",prop:"fecha",type:"date",OrderInit:"ASC"},{name:"P.",prop:"pendiente",type:"boolean",filterInit:" pendiente ",action:"updatePendiente"}],this.soloPendientes=!0,this.entityName="userxbizum"}ngOnInit(){return(0,u.Z)(function*(){})()}soloPendientesEvent(t){let n=this.columns.find(i=>"pendiente"==i.prop);n&&(n.filterInit=this.soloPendientes?"":" pendiente ",this.getTableRefresh())}actionEmiter(t){"updatePendiente"===(null==t?void 0:t.action)&&this.updatePendiente(t.row)}updatePendiente(t){var n=this;return(0,u.Z)(function*(){try{const i=new s.classHttp("put",n.entityName,null,{pendiente:!t.pendiente},t.id);(yield n.myHttpService.ejecuteURL(i))&&(n.utilService.message(s.typeMessage.success,"Guardado correctamente"),n.getTableRefresh())}catch{}})()}updatependientesAll_event(){var t=this;return(0,u.Z)(function*(){var i;yield(yield t.alertController.create({header:`Antenci\xf3n!! se van a pasar todos los bizum a NO pendientes (${t.TotalImporte} \u20ac). \xbfContinuar?`,buttons:[{text:"Cancelar",role:"cancel",handler:(i=(0,u.Z)(function*(){}),function(){return i.apply(this,arguments)})},{text:"OK",role:"confirm",handler:function(){var i=(0,u.Z)(function*(){yield t.updatependientesAll()});return function(){return i.apply(this,arguments)}}()}]})).present()})()}updatependientesAll(){var t=this;return(0,u.Z)(function*(){try{const n=new s.classHttp("put",t.entityName,"updatependientesAll",{});(yield t.myHttpService.ejecuteURL(n))&&(t.utilService.message(s.typeMessage.success,"Guardado correctamente"),t.getTableRefresh())}catch{}})()}onLoadDataEmiter(t){let n=t.filter(i=>i.pendiente);n=n.map(i=>i.importe),this.TotalImporte=n.reduce((i,r)=>i+Number(r),0)}}return(o=c).\u0275fac=function(t){return new(t||o)(e.Y36(s.MyHttpService),e.Y36(s.UtilService),e.Y36(a.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bizum"]],features:[e.qOj],decls:19,vars:8,consts:[[3,"enableOnOffLabels","ngModel","ngModelChange","click"],["color","danger",3,"click"],["slot","start","name","star"],["slot","start"],[3,"title","entityName","columns","withCache","refresh","actionEmiter","onLoadDataEmiter"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-toggle",0),e.NdJ("ngModelChange",function(r){return n.soloPendientes=r})("click",function(r){return n.soloPendientesEvent(r)}),e._uU(4,"Solo pendientes"),e.qZA()(),e.TgZ(5,"ion-col")(6,"ion-button",1),e.NdJ("click",function(){return n.updatependientesAll_event()}),e._UZ(7,"ion-icon",2),e._uU(8," Todos a NO pendientes "),e.qZA()()(),e.TgZ(9,"ion-row")(10,"ion-col")(11,"ion-item")(12,"ion-badge",3),e._uU(13),e.qZA(),e.TgZ(14,"ion-label"),e._uU(15,"Total bizum pendiente"),e.qZA()()()(),e.TgZ(16,"ion-row")(17,"ion-col")(18,"my-table",4),e.NdJ("actionEmiter",function(r){return n.actionEmiter(r)})("onLoadDataEmiter",function(r){return n.onLoadDataEmiter(r)}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("enableOnOffLabels",!0)("ngModel",n.soloPendientes),e.xp6(10),e.hij(" ",n.TotalImporte,""),e.xp6(5),e.Q6J("title","Bizums")("entityName",n.entityName)("columns",n.columns)("withCache",!0)("refresh",n.tableRefresh))},dependencies:[d.JJ,d.On,a.yp,a.YG,a.wI,a.jY,a.gu,a.Ie,a.Q$,a.Nd,a.ho,a.w,s.MyTableComponent]}),c})()}];let y=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,d.u5,d.UX,a.Pc,h.Bz.forChild(f),s.SharedComponentsModule]}),c})()}}]);