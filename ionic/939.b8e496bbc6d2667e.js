"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[939],{939:(Z,m,l)=>{l.r(m),l.d(m,{UsersPagePageModule:()=>U});var p=l(6814),r=l(95),a=l(2511),g=l(5861),c=l(242),e=l(6689);function v(s,i){if(1&s){const o=e.EpF();e.TgZ(0,"ion-card",1)(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"ion-card-subtitle"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.TgZ(7,"ion-card-content")(8,"form",2)(9,"ion-list")(10,"ion-item")(11,"h2"),e._uU(12,"Incrementar saldo"),e.qZA()(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",3),e.qZA(),e.TgZ(15,"ion-item"),e._UZ(16,"br"),e.TgZ(17,"base-button-guardar",4),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.onSubmit())}),e.qZA()()()()(),e._UZ(18,"br")(19,"br"),e.TgZ(20,"base-button-cancelar",5),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.cancel())}),e.qZA()()}if(2&s){const o=e.oxw();e.s9C("color",(null==o.user?null:o.user.saldo)<1?"danger":(null==o.user?null:o.user.saldo)>1&&(null==o.user?null:o.user.saldo)<2?"warning":"primary"),e.xp6(3),e.Oqu(null==o.user?null:o.user.name),e.xp6(2),e.hij("Saldo actual : ",e.lcZ(6,6,null==o.user?null:o.user.saldo),""),e.xp6(3),e.Q6J("formGroup",o.formGroup),e.xp6(9),e.Q6J("isSaving",o.isSaving)("valid",o.formGroup.valid)}}let h=(()=>{var s;class i{set SetUser(t){t&&(this.user=t,this.createForm())}constructor(t,n){this.myHttpService=t,this.utilService=n,this.saveEvent=new e.vpe,this.cancelEvent=new e.vpe,this.isSaving=!1}ngOnInit(){}createForm(){var t;this.formGroup=new r.cw({id:new r.NI("",[r.kI.required]),importe:new r.NI("",[r.kI.required])}),this.formGroup.controls.id.setValue(null===(t=this.user)||void 0===t?void 0:t.id)}onSubmit(){var t=this;return(0,g.Z)(function*(){t.isSaving=!0;try{const n=new c.classHttp("post","user","addSaldo",t.formGroup.value),d=yield t.myHttpService.ejecuteURL(n);t.isSaving=!1,d&&(t.utilService.message(c.typeMessage.success,"Guardado correctamente"),t.user=null,t.saveEvent.emit(!0))}catch{t.isSaving=!1}})()}cancel(){this.user=null,this.cancelEvent.emit(!0)}}return(s=i).\u0275fac=function(t){return new(t||s)(e.Y36(c.MyHttpService),e.Y36(c.UtilService))},s.\u0275cmp=e.Xpm({type:s,selectors:[["add-saldo"]],inputs:{SetUser:"SetUser"},outputs:{saveEvent:"saveEvent",cancelEvent:"cancelEvent"},decls:2,vars:1,consts:[[3,"isOpen","willDismiss"],[3,"color"],[3,"formGroup"],["label","importe","formControlName","importe","type","number","placeholder","000"],[3,"isSaving","valid","click"],[3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-modal",0),e.NdJ("willDismiss",function(){return n.cancel()}),e.YNc(1,v,21,8,"ng-template"),e.qZA()),2&t&&e.Q6J("isOpen",null!=n.user)},dependencies:[a.PM,a.FN,a.Zi,a.tO,a.Dq,a.pK,a.Ie,a.q_,a.ki,a.as,r._Y,r.JJ,r.JL,r.sg,r.u,c.ButtonGuardarComponent,c.ButtonCancelarComponent,p.JJ],styles:["ion-checkbox[_ngcontent-%COMP%]{--size: 32px;--checkbox-background-checked: #6815ec}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:6px;border:2px solid #6815ec}"]}),i})();const f=function(){return{class:"enRojo",condicion:"row['saldo'] <1"}},_=function(){return{class:"enNaranja",condicion:"row['saldo'] >= 1 && row['saldo'] < 2"}},S=function(s,i){return[s,i]};let b=(()=>{var s;class i extends c.BasePage{constructor(t){super(t),this.myHttpService=t,this.columns=[{name:"Nombre",prop:"name",type:"text"},{name:"Saldo",prop:"saldo",type:"number",OrderInit:"ASC"},{name:"estado",prop:"estadoId",type:"number",filterInit:' "estadoId" <> 2',hide:!0},{name:"Accion",prop:"",type:"action",icon:"card",action:"addSaldo"}],this.soloActivos=!0,this.entityName="user"}ngOnInit(){return(0,g.Z)(function*(){})()}soloActivoEvent(t){let n=this.columns.find(d=>"estado"==d.name);n&&(n.filterInit=this.soloActivos?"":' "estadoId" <> 2',this.getTableRefresh())}actionEmiter(t){"addSaldo"===(null==t?void 0:t.action)&&this.AddSaldo(t.row)}AddSaldo(t){this.rowAddSaldo=t}}return(s=i).\u0275fac=function(t){return new(t||s)(e.Y36(c.MyHttpService))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-users"]],features:[e.qOj],decls:9,vars:13,consts:[["justify","start",3,"ngModel","ngModelChange","click"],[3,"title","entityName","columns","withCache","refresh","objNgClass","actionEmiter"],[3,"SetUser","saveEvent","cancelEvent"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-checkbox",0),e.NdJ("ngModelChange",function(u){return n.soloActivos=u})("click",function(u){return n.soloActivoEvent(u)}),e._uU(4,"Solo activos"),e.qZA()()(),e.TgZ(5,"ion-row")(6,"ion-col")(7,"my-table",1),e.NdJ("actionEmiter",function(u){return n.actionEmiter(u)}),e.qZA()()()(),e.TgZ(8,"add-saldo",2),e.NdJ("saveEvent",function(){return n.getTableRefresh()})("cancelEvent",function(){return n.rowAddSaldo=null}),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngModel",n.soloActivos),e.xp6(4),e.Q6J("title","Lud\xf3patas")("entityName",n.entityName)("columns",n.columns)("withCache",!0)("refresh",n.tableRefresh)("objNgClass",e.WLB(10,S,e.DdM(8,f),e.DdM(9,_))),e.xp6(1),e.Q6J("SetUser",n.rowAddSaldo))},dependencies:[r.JJ,r.On,a.nz,a.wI,a.jY,a.Nd,a.w,c.MyTableComponent,h]}),i})();var A=l(3044),C=l(3355);const y=[{path:"",component:b}];let U=(()=>{var s;class i{}return(s=i).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p.ez,r.u5,r.UX,a.Pc,A.Bz.forChild(y),c.SharedComponentsModule,C.S]}),i})()}}]);